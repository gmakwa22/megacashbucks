var is_init=!1,SMARTPHONE=320,TABLET=768,LARGER_TABLET=992,DESKTOP=1200,LARGER_SCREEN=1921,social="",loanCalculation=function(){$(".loan-slider").find(".dragger").length?e=parseInt($(".loan-slider").find(".dragger").attr("data-slider-value")):$("#amount").length&&(e=parseInt($("#amount").val()));var e,a=$("option[data-loan-selected-province='true']").data("loan-percent"),t=null;if(void 0!==a?a/=100:a=.15,"/contract"==location.pathname){var n=$("#final-price"),i=parseInt($("#final-price").val());n&&!isNaN(i)?e=i:isNaN(i)&&(e=parseInt($("#amount").val()))}if(!$(".loan-slider").length){var l={alberta:15,"british-columbia":17,saskatchewan:23,ontario:15,"new-brunswick":15,"nova-scotia":22,manitoba:17};if($("#amount").length)var e=parseInt($("#amount").val());if(void 0!==$("#selectProvince")){for(var o in l)if($("#selectProvince").val()===o)var a=l[o]/100}}"alberta"!==$("#selectProvince").val()&&"manitoba"!==$("#selectProvince").val()||(t="chkCashAdvance"),void 0===e&&(e=0,a=0,t=0),1==$("#terms").val()?t="chkCashAdvance":2==$("#terms").val()?t="chkFlexPay":3==$("#terms").val()&&(t="chkFlexPayThree");var r=(e*a).toFixed(2),s=(e+e*a).toFixed(2),d=((e+e*a)/2).toFixed(2),c=((e+e*a)/3).toFixed(2),u=(r/45).toFixed(2);null!==t&&"chkCashAdvance"===t?($("p[data-loan='full-price']").length?($("p[data-loan='full-price']").text(e),$("p[data-loan='calculated-price']").text(s),$(".two .bl").removeClass("bl-price"),$(".two .cashAd").show(),$(".two .discard").hide(),$(".two #three").hide()):$("span[data-loan='full-price']").length&&($("span[data-loan='full-price']").text("$"+e),$("span[data-loan='calculated-interest']").text("$"+u),$("span[data-loan='calculated-price']").text("$"+s)),$("#terms").val(1)):null!==t&&0!==t?("chkFlexPay"===t&&($("p[data-loan='full-price']").length?($("p[data-loan='full-price']").text(e),$(".two .discard").show(),$(".two .discard-p").addClass("schedule-small"),$(".two .bl").addClass("bl-price"),$("p.money.schedule-small").text(d),$(".two .cashAd").hide().removeClass("animated"),$(".two #three").hide().removeClass("animated")):$("span[data-loan='full-price']").length&&($("span[data-loan='full-price']").text("$"+e),$("span[data-loan='calculated-interest']").text("$"+u),$("span[data-loan='calculated-price']").text("$"+s)),$("#terms").val(2)),"chkFlexPayThree"===t&&($("p[data-loan='full-price']").length?($("p[data-loan='full-price']").text(e),$(".two .discard").show(),$(".two .discard-p").addClass("schedule-small"),$(".two .bl").addClass("bl-price"),$("p.money.schedule-small").text(c),$(".two .cashAd").hide(),$(".two #three").show()):$("span[data-loan='full-price']").length&&($("span[data-loan='full-price']").text("$"+e),$("span[data-loan='calculated-interest']").text("$"+u),$("span[data-loan='calculated-price']").text("$"+s)),$("#terms").val(3))):0===t&&($("p[data-loan='full-price']").text(e),$("span[data-loan='calculated-interest']").text("$"+u),$("span[data-loan='calculated-price']").text("$"+s),$("span[data-loan='full-price']").length&&($("span[data-loan='full-price']").text("$"+e),$("span[data-loan='calculated-interest']").text("$"+u),$("span[data-loan='calculated-price']").text("$"+s)),$("#terms").val()),$("#amount").val(e),puchPayment(),getScreen()},puchPayment=function(){$("p.title span.cashAd").length&&!$(".bl-price").length&&$("p.big-repay").attr("style","line-height: 14px;")},getScreen=function(){$("#screen_dimensions").length&&$("#screen_dimensions").val(window.screen.width+"X"+window.screen.height)},modalDialog=function(e,a,t,n,i){var l="#"+e,o=strings[a][t],r="";void 0===o?(r='<span id="error_div-modal"></span> <span class="text-center">No Message !</span>',-1==(t=String(t)).indexOf("strings")&&"undefined"!==t.indexOf("strings")&&(r='<span id="error_div-modal"></span>'+(o=t))):r=o;var s="",d="",c="";$(l+" .modal-content").removeClass("error-connect unsupported hold-on be-green coming-soon"),"success"===n?($("#"+e+" .modal-content").addClass("coming-soon"),"newsletter"===a&&"modal"===t?(s="<h2>Coming soon!</h2><p>iCash is not available yet in this province.</p>",d=r):(s=void 0===i?"<h2>Success</h2>":"<h2>"+i+"</h2>",d='<p class="text-center">'+r+"</p>"),c='<div class="coming be-green">'+s+"</div>"):"error"===n||200==n?($(l+" .modal-content").addClass("error-connect unsupported"),$(l+" .container-fluid").addClass("modal-error"),c='<div class="be-red"><h2>Warning</h2></div>',d='<label class="text-center error">'+r+"</label><br>"):"hold-on"===n&&($(l+" .modal-content").addClass("hold-on"),c='<div class="coming be-orange">'+(s=void 0===i?"<h2>Hold on!</h2>":"<h2>"+i+"</h2>")+"</div>",d=r+"<br>"),$(l+" .modal-header").html('<button type="button" class="btn close active" data-dismiss="modal">&times;</button>'+c),$(l+" .container-fluid").length||$(".modal-body").html("<div class='container-fluid text-center'></div>"),$(l+" .container-fluid").html(d),$(l).modal("show")},provinceAlberta=function(e){"alberta"===e?($("#terms-box").hide(),$(".text_two").remove(),$("#phone-slider .choice-manitoba").hide(),$("#phone-slider .choice-alberta").fadeIn(400),$("#terms-slider").slider("value",1)):"manitoba"===e?($("#terms-box").hide(),$(".text_two").remove(),$("#phone-slider .choice-alberta").hide(),$("#phone-slider .choice-manitoba").fadeIn(400),$("#terms-slider").slider("value",1)):($("#phone-slider .choice-alberta").hide(),$("#phone-slider .choice-manitoba").hide(),$("#terms-box").fadeIn(400))},changeTextTerms=function(e){$(".text_two").remove(),2==e?$(strings.default.two_payment).insertBefore($(".choice-alberta")).fadeIn():3==e?$(strings.default.three_payment).insertBefore($(".choice-alberta")).fadeIn():$(".text_two").remove()};$(document).ready(function(){void 0!==$.validator&&$.validator.setDefaults({validClass:"succes",onclick:function(e,a){this.element(e)},onfocusout:function(e,a){this.element(e)}}),$("form").length&&$("form").each(function(){var e=$(this).attr("id");location.pathname,$("#"+e).validate({errorPlacement:function(e,a){var t=$("#"+a.attr("id"));t.parent().attr("class").indexOf("input-group"),e.appendTo(t.parent())}})}),$(".ui.dropdown").dropdown({on:"click"}),$(".form-control.dropdown").each(function(e){var a=$(this).children("select").attr("id");$(this).attr("id","select-"+a)}),$("[id$='_phone']").mask("000-000-0000"),$("#date_of_birth").mask("0000-00-00"),$("#pin").mask("0000"),$("[id$='postal_code'], #postal_code").mask("S0S 0S0",{onKeyPress:function(e,a){a.currentTarget.value=e.toUpperCase()}}),$("#arc-slider").roundSlider({sliderType:"min-range",circleShape:"half-top",value:"800",startAngle:225,editableTooltip:!1,radius:150,width:14,handleSize:"+32",max:"1500",min:"120",step:"10",tooltipFormat:function(e){return e.value=10*Math.floor(e.value/10),e.value<1500&&e.value>700?$("#phone-slider #arc-slider .rs-bar .rs-handle").css("margin","-23px 0px 0px -15px"):e.value<701&&e.value>400?$("#phone-slider #arc-slider .rs-bar .rs-handle").css("margin","-23px 0px 0px -25px"):e.value<401&&e.value>100&&$("#phone-slider #arc-slider .rs-bar .rs-handle").css("margin","-23px 0px 0px -33px"),$("#loan-slider").val(1650-e.value),"<img src='"+window.location.origin+"/public/images/dollar-removebg.png' style='width: 21px; margin-top: -5px; margin-right: 2px;'>"+e.value}}),$("#phone-slider .fa-minus").on("click",function(){var e=$("#arc-slider").roundSlider("getValue");$("#arc-slider").roundSlider("setValue",e-150)}),$("#phone-slider .fa-plus").on("click",function(){var e=$("#arc-slider").roundSlider("getValue");$("#arc-slider").roundSlider("setValue",e+150)}),$(function(){if($("#phone-slider, #loan-picker").length){var e=$("#terms"),a=$("<div id='terms-slider'><div id='custom-handle' class='ui-slider-handle'></div></div>").insertAfter(e).slider({min:1,max:3,range:"min",value:e[0].selectedIndex+1,create:function(){$("#custom-handle").html($(this).slider("value"))},slide:function(a,t){e[0].selectedIndex=t.value-1,$("#custom-handle").html(t.value),"3"===$("#terms").val()?($("#terms-box .dotes span").addClass("selected"),$("#terms").val(3).change()):"2"===$("#terms").val()?$("#terms").val(2).change():($("#terms-box .dotes span").removeClass("selected"),$("#terms").val(1).change()),changeTextTerms($("#terms").val())}});$("#terms").on("change",function(){a.slider("value",this.selectedIndex+1),loanCalculation()})}})});var validateForm=function(e,a,t,n,i,l,o){void 0!==l&&(current_page=l),$.ajax({url:"/"+a,type:"post",dataType:"json",data:$(e).serialize(),success:function(a){"#newsletter_form2"===e&&void 0!==a.code&&303===a.code&&redirectToLogin(),200==a.code||201==a.code?($("#error").hide(),$("#success").fadeIn(),""!=a.success?$("#success #success_text").html(a.success):$("#success #success_text").html("Success"),$(".min-margin").length&&$(".min-margin").fadeIn(),"#resetForm"===e?($("#resetForm").hide(),$("#resetvalidate").fadeIn(),setTimeout(function(){window.location="/login"},2500)):"#loginForm"===e?window.location="/member/dashboard/index":"#signupForm"===e?($(".email-show").html($("#email").val()),$("#signupForm").hide(),$("#checkemail").fadeIn()):"#forgotForm"===e?($("#forgotForm").hide(),$("#checkemail").fadeIn()):"#signupCompletionForm"===e?($("#signupCompletionForm").hide(),$("#creataccount").fadeIn(),setTimeout(function(){window.location="/login"},4e3)):"#newsletter_form2"===e||"#newsletter_form"===e?modalDialog(t,current_page,a.code,"success","Congratulations!"):"#email_contact"===e?(o.preventDefault(),setTimeout(function(){},2e3)):"#AppStep0Form"===e?($(".pin-validation").fadeIn(),$("#next").hide(),$("#resend").fadeIn(),$("#mobile_phone.fill").val($("#mobile_phone").val())):"#AppStep0Form2"===e?($(".bloc-submit #valide").append('  <img src="/images/loading.svg" width="20">'),window.location="/member/application/step1"):"#chooseAmount"===e?$("#fade , .popup_block").fadeOut(function(){$("#fade, a.close").remove()}):($("#success").hide(),$("#error").fadeIn(),$("#error #error_text").html(a.error))):($("#success").hide(),$("#error").fadeIn(),$("#error #error_text").html(a.error))},error:function(e,a,t){}})},redirectToLogin=function(){window.location=js_web_root+"memberlogin"},validationForm=function(e,a){"text"===e?a.match("_phone$")?("employer_phone"===a?$("#"+a).rules("add",{required:function(){return"7"!==$("#job_status_id").val()&&""===$("#employer_phone").val()}}):$("#"+a).rules("add",{CAnumber:!0}),$("#"+a).rules("add",{minlength:10,CAnumber:!0})):-1!==a.indexOf("postal_code")?$("#"+a).rules("add",{postalCodeCA:!0}):-1!==a.indexOf("amount")||-1!==a.indexOf("_paycheck")?("additional_amount"===a&&$("#"+a).rules("add",{required:function(){return!(""!==$("select#job_additional_frequency_id").val()&&5!==parseInt($("select#job_additional_frequency_id").val()))&&0===parseInt($("#additional_amount").val())}}),$("#"+a).rules("add",{currency:["$",!1]})):a.match("_pay$")?$("#"+a).rules("add",{dateEN:!0,required:function(){return!(""!==$("#"+a).val())}}):-1!==a.indexOf("autocomplete")?$("#"+a).rules("add",{}):"number"===a||"phone_number"===a?$("#"+a).rules("add",{digits:!0}):"date_of_birth"===a?$("#"+a).rules("add",{dateEN:!0}):a.match("_ext$")||-1!==a.indexOf("_number")&&"branch_number"!==a||"monthly_visites"===a?$("#"+a).rules("add",{alphadigits:!0}):-1!==a.indexOf("pin")?$("#"+a).rules("add",{digits:!0,latinletters:!1,minlength:4,maxlength:4}):"sin"===a?$("#"+a).rules("add",{required:function(){return 7!=$("#address_state_id").val()},sinnumber:!0}):"websites"===a||"networks_used"===a?$("#"+a).rules("add",{}):"branch_number"===a?$("#"+a).rules("add",{digits:!0,minlength:4,maxlength:5}):"firstname"===a||"lastname"===a?$("#"+a).rules("add",{latinletters:!0,minlength:2}):"password"===a?$("#"+a).rules("add",{passWord:!0,minlength:8}):"p1"===a||"p2"===a?$("#"+a).rules("add",{passWord:!0,minlength:8}):$("#"+a).rules("add",{latinletters:!0}):"password"===e&&("p1"===a||"p2"===a?$("#signupCompletionForm, #resetForm").length&&$("#"+a).rules("add",{passWord:!0,minlength:8}):"password"===a&&$("#"+a).rules("add",{passWord:!0,minlength:8}))};$(".formular #next").on("click",function(){var e=$(this).attr("type"),a=$(this).attr("id");void 0!==a&&validationForm(e,a)}),$("button#previous, img#previous").on("click",function(){var e=$(this).data("prev-step");window.location="https://"+location.host+"/"+e});var gaImplement=function(e){var a={"/index/member/application2":["registration","about you","validate PIN number"],"/login":["login","success","click"],"/iav/index/updateallnumbers":["registration","validation compte","save and continue"],"/iav/index/updatebranchnumber":["registration","validation compte","save and continue"],"/validatephone":["registration","premier formulaire","next"],"/index/member/signcontract":["registration","signature du contrat","I agree"],"/iav":["registration","choose your bank","save and continue"],"/index/member/saveapplication2":["registration","deuxieme formulaire","next"],"/newsletter":["newsletter","subscription","coming-soon_index"],"/newsletter2":["newsletter","subscription","coming-soon_app1"],"/email":["contact us","click","send message"],"/subscribeaffiliate":["subscribe affiliate","click","subscribe affiliate"],"hello-mail":["mailto","why use us","hello@icash.ca"],"hello-mail2":["mailto","faq","hello@icash.ca"]};void 0!==a[e]&&ga("send","event",a[e][0],a[e][1],a[e][2])},setCookie=function(e,a){var t=new Date;t.setTime(t.getTime()+62208e6);var n="expires="+t.toUTCString();document.cookie=e+"="+a+";"+n+";path=/"},getCookie=function(e){for(var a=e+"=",t=decodeURIComponent(document.cookie),n=t.split(";"),i=0;i<n.length;i++){for(var l=n[i];" "==l.charAt(0);)l=l.substring(1);if(0==l.indexOf(a))return l.substring(a.length,l.length)}return""},getPersistentCookie=function(){var e="";try{e=localStorage.getItem("persistent_id")}catch(a){e=getCookie("pid_cookie")}return e},getPersistentCookieDate=function(){var e="";try{e=localStorage.getItem("persistent_date")}catch(a){e=getCookie("pid_date")}return e},instantSearchKeys=function(){var e,a,t,n,i,l,o,r;if(n=faq,a=(e=$("#search")).val().toLowerCase(),t=$(".results"),$(".answer").remove(),a.length>=2){$("p.answers").fadeIn("fast");for(var s=a.split(" "),d=0;d<n.length;d++){o=0,l=n[d].keywords,i=n[d].title,r=n[d].answer;for(var c=0;c<l.length;c++)s.forEach(function(e){l[c].indexOf(e)>-1&&""!==e&&(o+=1)});o>0&&(t.append('<li class="answer '+d+'">'+i+"</li>"),$("li.answer."+d).append('<div class="response">'+r+"</div>"),$("li.answer."+d).append('<div class="help">Was this answer helpful? <div class="btn yes"><i class="fa fa-check"></i> Yes</div><div class="btn no"><i class="fa fa-times"></i> No</div></div>'))}0==$("li.answer").length&&($(".answer").remove(),$("p.answers").hide())}else $(".answer").remove(),$("p.answers").hide();$("li.answer:not(.no):not(.yes)").on("click",function(){$(this).hasClass("open")?($(this).removeClass("open").children(".response").hide(),$(this).removeClass("open").children(".help").hide()):($(this).addClass("open").children(".response").fadeIn(),$(this).addClass("open").children(".help").fadeIn())}),$(".btn.no").on("click",function(){$("#dialog-email").modal("show")}),$(".btn.close").on("click",function(){$("#toggle-view-email, #toggle-view-phone").removeClass("bg-open"),$("#dialog-email .block-p.active").removeClass("open").hide()}),$("#toggle-view-email").on("click",function(){$("#toggle-view-phone").toggleClass("bg-open"),$("#toggle-view-phone .block-p.active").removeClass("open").hide()}),$("#toggle-view-phone").on("click",function(){$("#toggle-view-email").toggleClass("bg-open"),$("#toggle-view-email .block-p.active").removeClass("open").hide()})},animation=function(e,a,t){bodymovin.loadAnimation({container:document.getElementById(e),renderer:"svg",loop:t,autoplay:!0,path:"/images/animations/"+a+".json"})};